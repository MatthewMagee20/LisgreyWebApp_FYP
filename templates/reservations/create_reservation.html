{% extends 'base.html' %}
{% load crispy_forms_filters %}
{% load crispy_forms_tags %}

{% block head_title %} | Reservation{% endblock %}

{% block body_content %}
    <div class="container pt-5">
        {% include 'messages.html' %}
        <h2 class="text-center">Make a Reservation</h2>
        <form method="POST" class="post-form">
            {% csrf_token %}
            {{ form | crispy}}
            <div class="text-center">
                <div class="g-recaptcha" data-sitekey="6Lf-SY4aAAAAAI7V1y7mhAV2PKNVLHcf4D9F8rSO"></div>
            </div>
            <input class="btn btn-primary btn-lg btn-block" type="submit" value="Confirm">
        </form>
    </div>
    <script>
        console.log("hello")
        $(document).ready(function() {
            $('#id_date').on('change', function (e) {
                const date = this.value;
                const time = document.getElementById("id_time");
                const numPeople = document.getElementById("id_no_of_people");
                e.preventDefault()

                const data = {
                    'user_date': date,
                    'user_time': time,
                    'user_no_of_people': numPeople
                }
                $.ajax({
                    type: 'GET',
                    url: '{% url "nu_reservation" %}',
                    data: data,
                    success: function(res){
                        console.log('success');
                    }
                })
            })
        })
    </script>
{% endblock %}

